---
title: 移动开发Html5前端性能优化小记
date: 2017-01-05 11:35:50
tags:
    - 笔记
---
# 整理过的页面优化注意项：

## 加载优化
* 1.加载过程是最为耗时的过程，可能会占到总耗时的80%时间，因此是优化的重点。

<!-- more --> 
## 减少HTTP请求
### 因为手机浏览器同时响应请求为4个请求(Android支持4个，iOS 5后可支持6个)，所以要尽量减少页面的请求数，首次加载同时请求数不能超过4个。
* 1.合并CSS、JavaScript
* 2.合并小图片，使用雪碧图

## 缓存
### 使用缓存可以减少向服务器的请求数，节省加载时间，所以所有静态资源都要在服务器端设置缓存，并且尽量使用长Cache(长Cache资源的更新可使用时间戳)
* 1.缓存一切可缓存的资源
* 2.使用长Cache（使用时间戳更新Cache）
* 3.使用外联式引用CSS、JavaScript

## 无阻塞
* 1.写在HTML头部的JavaScript（无异步），和写在HTML标签中的Style会阻塞页面的渲染，因此CSS放在页面头部并使用Link方式引入，避免在HTML标签中写Style，JavaScript放在页面尾部或使用异步方式加载。
* 2.使用首屏加载 [想了解首屏加载的猛戳我!](http://www.alloyteam.com/2016/01/points-about-resource-loading/)

## 按需加载
### 将不影响首屏的资源和当前屏幕资源不用的资源放到用户需要时才加载，可以大大提升重要资源的显示速度和降低总体流量。
* 1.LazyLoad
* 2.滚屏加载
* 3.通过Media Query选择性加载css

## 预加载
### 大型重资源页面（如游戏）可使用增加Loading的方法，资源加载完成后再显示页面。但Loading时间过长，会造成用户流失。对用户行为分析，可以在当前页加载下一页资源，提升速度。
* 1.可感知Loading(如进入空间游戏的Loading)
* 2.不可感知的Loading（如提前加载下一页)

## 压缩图片
### 图片是最占流量的资源，因此尽量避免使用他，使用时选择最合适的格式（实现需求的前提下，以大小判断），合适的大小，然后使用智图压缩，同时在代码中用Srcset来按需显示。
* 1.使用其它方式代替图片(1. 使用CSS3 2. 使用SVG 3. 使用IconFont)
* 2.选择合适的大小（首次加载不大于1014KB 且 不宽于640（基于手机屏幕一般宽度)

## 异步加载第三方资源
* 1.第三方资源不可控会影响页面的加载和显示，因此要异步加载第三方资源。

## 减少重绘和回流
* 1.避免不必要的Dom操作
* 2.尽量改变Class而不是Style
* 3.避免使用document.write

## TOUCH事件优化
* 1.使用touchstart、touchend代替click，因快影响速度快。但应注意Touch响应过快，易引发误操作

## 动画优化
* 1.尽量使用CSS3动画
* 1.CSS动画只用 (-webkit- 无前缀)两种即可

